#: kivy 1.8.0

# SCREENS

<LoginScreen>:

    username: ti_username.text
    password: ti_password.text

    GridLayout:
        rows: 2
        padding: "10dp"

        AnchorLayout:
            anchor_x: 'center'
            anchor_y: 'center'

            GridLayout:
                cols: 2
                size_hint: (1, None)
                row_default_height: "40dp"
                row_force_default: True
                spacing: "10dp"

                Label:
                    size_hint_x: .2
                    text: 'Username'
                TabTextInput:
                    id: ti_username
                    next_widget: ti_password
                    on_text_validate: ti_password.focus = True
                    font_size: "25dp"
                Label:
                    size_hint_x: .2
                    text: 'Password'
                TabTextInput:
                    id: ti_password
                    password: True
                    next_widget: ti_username
                    on_text_validate: root.login()
                    font_size: "25dp"

        AnchorLayout:
            anchor_x: 'right'
            anchor_y: 'top'

            BoxLayout:
                orientation: 'horizontal'
                size_hint: (None, None)
                height: "40dp"
                width: "200dp"

                Button:
                    id: btn_login
                    text: 'Login'
                    on_press: root.login()
                Button:
                    id: btn_register
                    text: 'Register'
                    on_press: root.manager.current = app.REGISTER_SCREEN

<RegisterScreen>:
    username: ti_username.text
    password1: ti_password1.text
    password2: ti_password2.text

    GridLayout:
        rows: 2
        padding: "10dp"

        AnchorLayout:
            anchor_x: 'center'
            anchor_y: 'center'

            GridLayout:
                cols: 2
                size_hint: (1, None)
                row_default_height: "40dp"
                row_force_default: True
                spacing: "10dp"

                Label:
                    size_hint_x: .2
                    text: 'Username'
                TabTextInput:
                    id: ti_username
                    next_widget: ti_password1
                    on_text_validate: ti_password1.focus = True
                    font_size: "25dp"
                Label:
                    size_hint_x: .2
                    text: 'Password'
                TabTextInput:
                    id: ti_password1
                    password: True
                    next_widget: ti_password2
                    on_text_validate: ti_password2.focus = True
                    font_size: "25dp"
                Label:
                    size_hint_x: .2
                    text: 'Retype Password'
                TabTextInput:
                    id: ti_password2
                    password: True
                    next_widget: ti_username
                    on_text_validate: root.register()
                    font_size: "25dp"

        AnchorLayout:
            anchor_x: 'right'
            anchor_y: 'top'

            BoxLayout:
                orientation: 'horizontal'
                size_hint: (None, None)
                height: "40dp"
                width: "200dp"

                Button:
                    id: btn_cancel
                    text: 'Cancel'
                    on_press: root.finish()
                Button:
                    id: btn_register
                    text: 'Register'
                    on_press: root.register()

<HomeScreen>:
    BoxLayout:
        orientation: 'horizontal'

        BoxLayout:
            id: gl_settings
            orientation: 'vertical'

            Button:
                id: btn_add_corpus
                size_hint: (.4, 1)
                text: 'Add Corpus'
                on_press: root.show_file_dialog()
            Button:
                id: btn_bindings
                size_hint: (.4, 1)
                text: 'Bindings'
            Button:
                id: btn_playground
                size_hint: (.4, 1)
                text: 'Playground'
            Button:
                id: btn_advanced
                size_hint: (.4, 1)
                text: 'Advanced'

        GridLayout:
            id: gl_user_stats
            cols: 1

            Label:
                text: 'USER STATS'

# Modals

<MessageModal>:
    BoxLayout:
        orientation: 'vertical'

        Label:
            id: lb_message
            text: root.message

        AnchorLayout:
            anchor_y: 'bottom'
            anchor_x: 'right'

            Button:
                size_hint: (None, None)
                height: '40dp'
                width: '100dp'
                text: 'Cancel'
                on_press: root.cancel()


<FileModal>:
    BoxLayout:
        orientation: 'vertical'

        FileChooserListView:
            id: filechooser
            filters: ['*.txt']

        AnchorLayout:
            anchor_y: 'bottom'
            anchor_x: 'right'

            BoxLayout:
                size_hint: (None, None)
                height: '40dp'
                width: '200dp'

                Button:
                    text: 'Cancel'
                    on_release: root.cancel()

                Button:
                    text: 'Open'
                    on_release: root.load(filechooser.selection)

